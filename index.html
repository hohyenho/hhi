<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/all.css">
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <figure>
        <h1>
            <strong>HIMEDIA</strong>
            <span>UI/UX DESIGN & DEVELOPMENT</span>
        </h1>
        <a href="#" class="menu"><i class="fa-solid fa-bars"></i></a>
        <p class="footer">2023 Designed by HIMEDIA</p>
        <section>
            <article class="on">
                <div class="inner">
                    <div class="pic">
                        <div class="dot"></div>
                    </div>
                    <div class="txt">
                        <h2>Blizzards</h2>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                        <ul>
                            <li class="pause"><i class="fa-solid fa-pause"></i></li>
                            <li class="play"><i class="fa-solid fa-play"></i></li>
                            <li class="load"><i class="fa-solid fa-rotate-right"></i></li>
                        </ul>
                        <audio src="./music/Blizzards.mp3"></audio>
                    </div>
                </div>
            </article><!--//1-->
            <article>
                <div class="inner">
                    <div class="pic">
                        <div class="dot"></div>
                    </div>
                    <div class="txt">
                        <h2>Calm</h2>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                        <ul>
                            <li class="pause"><i class="fa-solid fa-pause"></i></li>
                            <li class="play"><i class="fa-solid fa-play"></i></li>
                            <li class="load"><i class="fa-solid fa-rotate-right"></i></li>
                        </ul>
                        <audio src="./music/Calm.mp3"></audio>
                    </div>
                </div>
            </article><!--//2-->
            <article>
                <div class="inner">
                    <div class="pic">
                        <div class="dot"></div>
                    </div>
                    <div class="txt">
                        <h2>Dusty_Road</h2>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                        <ul>
                            <li class="pause"><i class="fa-solid fa-pause"></i></li>
                            <li class="play"><i class="fa-solid fa-play"></i></li>
                            <li class="load"><i class="fa-solid fa-rotate-right"></i></li>
                        </ul>
                        <audio src="./music/Dusty_Road.mp3"></audio>
                    </div>
                </div>
            </article><!--//3-->
            <article>
                <div class="inner">
                    <div class="pic">
                        <div class="dot"></div>
                    </div>
                    <div class="txt">
                        <h2>Escape</h2>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                        <ul>
                            <li class="pause"><i class="fa-solid fa-pause"></i></li>
                            <li class="play"><i class="fa-solid fa-play"></i></li>
                            <li class="load"><i class="fa-solid fa-rotate-right"></i></li>
                        </ul>
                        <audio src="./music/Escape.mp3"></audio>
                    </div>
                </div>
            </article><!--//4-->
            <article>
                <div class="inner">
                    <div class="pic">
                        <div class="dot"></div>
                    </div>
                    <div class="txt">
                        <h2>Payday</h2>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                        <ul>
                            <li class="pause"><i class="fa-solid fa-pause"></i></li>
                            <li class="play"><i class="fa-solid fa-play"></i></li>
                            <li class="load"><i class="fa-solid fa-rotate-right"></i></li>
                        </ul>
                        <audio src="./music/Payday.mp3"></audio>
                    </div>
                </div>
            </article><!--//5-->
            <article>
                <div class="inner">
                    <div class="pic">
                        <div class="dot"></div>
                    </div>
                    <div class="txt">
                        <h2>Retreat</h2>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                        <ul>
                            <li class="pause"><i class="fa-solid fa-pause"></i></li>
                            <li class="play"><i class="fa-solid fa-play"></i></li>
                            <li class="load"><i class="fa-solid fa-rotate-right"></i></li>
                        </ul>
                        <audio src="./music/Retreat.mp3"></audio>
                    </div>
                </div>
            </article><!--//6-->
            <article>
                <div class="inner">
                    <div class="pic">
                        <div class="dot"></div>
                    </div>
                    <div class="txt">
                        <h2>Seasonal</h2>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                        <ul>
                            <li class="pause"><i class="fa-solid fa-pause"></i></li>
                            <li class="play"><i class="fa-solid fa-play"></i></li>
                            <li class="load"><i class="fa-solid fa-rotate-right"></i></li>
                        </ul>
                        <audio src="./music/Seasonal.mp3"></audio>
                    </div>
                </div>
            </article><!--//7-->
            <article>
                <div class="inner">
                    <div class="pic">
                        <div class="dot"></div>
                    </div>
                    <div class="txt">
                        <h2>Vespers</h2>
                        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                        <ul>
                            <li class="pause"><i class="fa-solid fa-pause"></i></li>
                            <li class="play"><i class="fa-solid fa-play"></i></li>
                            <li class="load"><i class="fa-solid fa-rotate-right"></i></li>
                        </ul>
                        <audio src="./music/Vespers.mp3"></audio>
                    </div>
                </div>
            </article><!--//8-->
        </section>
        <div class="btnPrev">
            <span>PREV MUSIC</span>
        </div>
        <div class="btnNext">
            <span>NEXT MUSIC</span>
        </div>
    </figure>


    <script>
        const frame = document.querySelector("section");
        const lists = frame.querySelectorAll("article");
        const audio = frame.querySelectorAll("audio");
        const prev = document.querySelector(".btnPrev");
        const next = document.querySelector(".btnNext");
        const deg = 45;
        let len = lists.length-1;
        let i = 0;
        let num = 0;
        let active = 0;
        console.log(len)

        // transform: rotate(45deg);

        for(let el of lists){
            let pic = el.querySelector(".pic");

            el.style.transform = `rotate(${deg * i}deg) translateY(-100vh)`;
            pic.style.backgroundImage = `url(../img/member${i+1}.jpg)`;

            i++;
            //  background-image: url(../img/member1.jpg);


            //재생, 정지, 처음부터 버튼 변수 지정
            let play = el.querySelector(".play");
            let pause = el.querySelector(".pause");
            let load = el.querySelector(".load");

            //play 클릭
            play.addEventListener("click",e => {
                //.closest()메서드 : 주어진 css 선택자와 일치하는 하는 요소를 찾을때까지 자기자신을 포함해서 위쪽(부모, 루트)으로 찾아주는 메서드
                //본인한테 가장 가까운 부모에서 찾아주는 메서드
                //.contains("on") : on을 가지고 있으면 참, 그렇지않으면 거짓
                let isActive = e.currentTarget.closest("article").classList.contains("on");
                console.log(isActive)

                if(isActive){
                    // pic.classList.add("on");
                    e.currentTarget.closest("article").querySelector(".pic").classList.add("on");
                    e.currentTarget.closest("article").querySelector("audio").play();
                }
            });

            pause.addEventListener("click",e=>{
                let isActive = e.currentTarget.closest("article").classList.contains("on");
                if(isActive){
                    pic.classList.remove("on");
                    e.currentTarget.closest("article").querySelector("audio").pause();
                }
            });


            load.addEventListener("click",e=>{
                let isActive = e.currentTarget.closest("article").classList.contains("on");
                if(isActive){
                    e.currentTarget.closest("article").querySelector("audio").load();
                    e.currentTarget.closest("article").querySelector("audio").play();
                }
               
            })
        }

        function activation(index,lists){
            for(let el of lists){
                el.classList.remove("on");
            }
            lists[index].classList.add("on");
        }

        //뮤직 초기화 함수 만들기
        function initMusic(){
            for(let el of audio){
                el.pause();
                el.load();
                el.closest("article").querySelector(".pic").classList.remove("on");
                // el.parentElement.previousElementSibling.classList.remove("on");
            }
        }
       
        prev.addEventListener("click",() => {
            initMusic()
                num++;
                frame.style.transform = `rotate(${num * deg}deg)`;
                // transform: rotate(45deg);
                (active == 0) ? active = len : active--;
                activation(active,lists);
        });


        next.addEventListener("click",() => {
            initMusic()
                num--;
                frame.style.transform = `rotate(${num * deg}deg)`;
                // transform: rotate(45deg);
                (active == len) ? active = 0 : active++;
                activation(active,lists);
        });

        


    </script>
</body>

</html>